<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电视倒计时软件</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .settings-panel {
            background-color: rgba(0, 0, 0, 0.85);
            padding: 20px;
            border-bottom: 2px solid #444;
            display: none;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .settings-panel.active {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .setting-group {
            margin-bottom: 15px;
        }
        
        .setting-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .setting-group input, .setting-group select {
            width: 100%;
            padding: 8px;
            font-size: 16px;
            border: 1px solid #555;
            border-radius: 4px;
            background-color: #333;
            color: white;
        }
        
        .color-input {
            height: 40px;
            cursor: pointer;
        }
        
        .countdown-display {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            background-size: cover;
            background-position: center;
            transition: all 0.3s ease;
        }
        
        .countdown-title {
            font-size: 48px;
            margin-bottom: 30px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .countdown-timer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .time-unit {
            display: flex;
            align-items: baseline;
        }
        
        .time-value {
            font-size: 80px;
            font-weight: bold;
            line-height: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }
        
        .time-label {
            font-size: 24px;
            margin-left: 5px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .colon {
            font-size: 60px;
            margin: 0 5px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .control-bar {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .btn {
            padding: 12px 24px;
            font-size: 18px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #555;
        }
        
        .btn-primary {
            background-color: #007bff;
        }
        
        .btn-primary:hover {
            background-color: #0069d9;
        }
        
        .theme-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .theme-option.active {
            border-color: white;
        }
        
        .fullscreen-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            z-index: 10;
        }
        
        /* 响应式设计 */
        @media (max-width: 1200px) {
            .time-value {
                font-size: 60px;
            }
            
            .time-label {
                font-size: 20px;
            }
            
            .countdown-title {
                font-size: 36px;
            }
            
            .colon {
                font-size: 50px;
            }
        }
        
        @media (max-width: 768px) {
            .time-value {
                font-size: 40px;
            }
            
            .time-label {
                font-size: 16px;
            }
            
            .countdown-title {
                font-size: 28px;
            }
            
            .colon {
                font-size: 35px;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .countdown-timer {
                flex-wrap: wrap;
                gap: 5px;
            }
            
            .time-value {
                font-size: 32px;
            }
            
            .time-label {
                font-size: 14px;
            }
            
            .colon {
                font-size: 24px;
                margin: 0 2px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="settingsPanel" class="settings-panel">
            <div class="settings-grid">
                <div class="setting-group">
                    <label for="targetDate">目标日期:</label>
                    <input type="datetime-local" id="targetDate">
                </div>
                
                <div class="setting-group">
                    <label for="countdownTitle">倒计时标题:</label>
                    <input type="text" id="countdownTitle" placeholder="输入倒计时标题">
                </div>
                
                <div class="setting-group">
                    <label for="titleColor">标题颜色:</label>
                    <input type="color" id="titleColor" class="color-input" value="#ffffff">
                </div>
                
                <div class="setting-group">
                    <label for="titleSize">标题大小:</label>
                    <input type="range" id="titleSize" min="20" max="100" value="48">
                    <span id="titleSizeValue">48px</span>
                </div>
                
                <div class="setting-group">
                    <label for="backgroundColor">背景颜色:</label>
                    <input type="color" id="backgroundColor" class="color-input" value="#222222">
                </div>
                
                <div class="setting-group">
                    <label for="backgroundImage">背景图片:</label>
                    <input type="file" id="backgroundImage" accept="image/*">
                </div>
                
                <div class="setting-group">
                    <label>预设主题:</label>
                    <div class="theme-options">
                        <div class="theme-option active" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" data-theme="purple"></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);" data-theme="pink"></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);" data-theme="blue"></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);" data-theme="green"></div>
                        <div class="theme-option" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);" data-theme="sunset"></div>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="numberColor">数字颜色:</label>
                    <input type="color" id="numberColor" class="color-input" value="#ffffff">
                </div>
                
                <div class="setting-group">
                    <label for="numberSize">数字大小:</label>
                    <input type="range" id="numberSize" min="20" max="120" value="80">
                    <span id="numberSizeValue">80px</span>
                </div>
                
                <div class="setting-group">
                    <label>标签颜色:</label>
                    <div class="label-colors">
                        <div class="label-color-group">
                            <label for="dayLabelColor">天:</label>
                            <input type="color" id="dayLabelColor" class="color-input" value="#ffffff">
                        </div>
                        <div class="label-color-group">
                            <label for="hourLabelColor">时:</label>
                            <input type="color" id="hourLabelColor" class="color-input" value="#ffffff">
                        </div>
                        <div class="label-color-group">
                            <label for="minuteLabelColor">分:</label>
                            <input type="color" id="minuteLabelColor" class="color-input" value="#ffffff">
                        </div>
                        <div class="label-color-group">
                            <label for="secondLabelColor">秒:</label>
                            <input type="color" id="secondLabelColor" class="color-input" value="#ffffff">
                        </div>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>标签大小:</label>
                    <div class="label-sizes">
                        <div class="label-size-group">
                            <label for="dayLabelSize">天:</label>
                            <input type="range" id="dayLabelSize" min="10" max="50" value="24">
                            <span id="dayLabelSizeValue">24px</span>
                        </div>
                        <div class="label-size-group">
                            <label for="hourLabelSize">时:</label>
                            <input type="range" id="hourLabelSize" min="10" max="50" value="24">
                            <span id="hourLabelSizeValue">24px</span>
                        </div>
                        <div class="label-size-group">
                            <label for="minuteLabelSize">分:</label>
                            <input type="range" id="minuteLabelSize" min="10" max="50" value="24">
                            <span id="minuteLabelSizeValue">24px</span>
                        </div>
                        <div class="label-size-group">
                            <label for="secondLabelSize">秒:</label>
                            <input type="range" id="secondLabelSize" min="10" max="50" value="24">
                            <span id="secondLabelSizeValue">24px</span>
                        </div>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="countdownPosition">倒计时位置:</label>
                    <select id="countdownPosition">
                        <option value="center">居中</option>
                        <option value="top">顶部</option>
                        <option value="bottom">底部</option>
                        <option value="left">左侧</option>
                        <option value="right">右侧</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div id="countdownDisplay" class="countdown-display">
            <button id="fullscreenBtn" class="fullscreen-btn">全屏</button>
            <h1 id="titleDisplay" class="countdown-title">重要事件倒计时</h1>
            <div class="countdown-timer">
                <div class="time-unit">
                    <div id="days" class="time-value">00</div>
                    <div id="dayLabel" class="time-label">天</div>
                </div>
                <div class="colon">:</div>
                <div class="time-unit">
                    <div id="hours" class="time-value">00</div>
                    <div id="hourLabel" class="time-label">时</div>
                </div>
                <div class="colon">:</div>
                <div class="time-unit">
                    <div id="minutes" class="time-value">00</div>
                    <div id="minuteLabel" class="time-label">分</div>
                </div>
                <div class="colon">:</div>
                <div class="time-unit">
                    <div id="seconds" class="time-value">00</div>
                    <div id="secondLabel" class="time-label">秒</div>
                </div>
            </div>
        </div>
        
        <div class="control-bar">
            <button id="settingsBtn" class="btn">设置</button>
            <button id="saveBtn" class="btn btn-primary">保存设置</button>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const settingsPanel = document.getElementById('settingsPanel');
        const countdownDisplay = document.getElementById('countdownDisplay');
        const settingsBtn = document.getElementById('settingsBtn');
        const saveBtn = document.getElementById('saveBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        
        const targetDateInput = document.getElementById('targetDate');
        const countdownTitleInput = document.getElementById('countdownTitle');
        const titleColorInput = document.getElementById('titleColor');
        const titleSizeInput = document.getElementById('titleSize');
        const titleSizeValue = document.getElementById('titleSizeValue');
        const backgroundColorInput = document.getElementById('backgroundColor');
        const backgroundImageInput = document.getElementById('backgroundImage');
        const numberColorInput = document.getElementById('numberColor');
        const numberSizeInput = document.getElementById('numberSize');
        const numberSizeValue = document.getElementById('numberSizeValue');
        const countdownPositionInput = document.getElementById('countdownPosition');
        const themeOptions = document.querySelectorAll('.theme-option');
        
        // 标签颜色和大小设置
        const dayLabelColorInput = document.getElementById('dayLabelColor');
        const hourLabelColorInput = document.getElementById('hourLabelColor');
        const minuteLabelColorInput = document.getElementById('minuteLabelColor');
        const secondLabelColorInput = document.getElementById('secondLabelColor');
        
        const dayLabelSizeInput = document.getElementById('dayLabelSize');
        const hourLabelSizeInput = document.getElementById('hourLabelSize');
        const minuteLabelSizeInput = document.getElementById('minuteLabelSize');
        const secondLabelSizeInput = document.getElementById('secondLabelSize');
        
        const dayLabelSizeValue = document.getElementById('dayLabelSizeValue');
        const hourLabelSizeValue = document.getElementById('hourLabelSizeValue');
        const minuteLabelSizeValue = document.getElementById('minuteLabelSizeValue');
        const secondLabelSizeValue = document.getElementById('secondLabelSizeValue');
        
        const titleDisplay = document.getElementById('titleDisplay');
        const daysDisplay = document.getElementById('days');
        const hoursDisplay = document.getElementById('hours');
        const minutesDisplay = document.getElementById('minutes');
        const secondsDisplay = document.getElementById('seconds');
        
        // 标签元素
        const dayLabel = document.getElementById('dayLabel');
        const hourLabel = document.getElementById('hourLabel');
        const minuteLabel = document.getElementById('minuteLabel');
        const secondLabel = document.getElementById('secondLabel');
        
        // 初始化
        function init() {
            // 从本地存储加载设置
            loadSettings();
            
            // 设置默认目标日期为明天
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            if (!localStorage.getItem('targetDate')) {
                targetDateInput.value = formatDateForInput(tomorrow);
            }
            
            // 初始化倒计时
            let targetDate = localStorage.getItem('targetDate') ? 
                new Date(localStorage.getItem('targetDate')) : tomorrow;
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // 更新数字大小显示
            numberSizeValue.textContent = numberSizeInput.value + 'px';
            titleSizeValue.textContent = titleSizeInput.value + 'px';
            
            // 更新标签大小显示
            dayLabelSizeValue.textContent = dayLabelSizeInput.value + 'px';
            hourLabelSizeValue.textContent = hourLabelSizeInput.value + 'px';
            minuteLabelSizeValue.textContent = minuteLabelSizeInput.value + 'px';
            secondLabelSizeValue.textContent = secondLabelSizeInput.value + 'px';
        }
        
        // 事件监听器
        settingsBtn.addEventListener('click', toggleSettings);
        saveBtn.addEventListener('click', saveSettings);
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        
        // 设置背景图片
        backgroundImageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    countdownDisplay.style.backgroundImage = `url(${event.target.result})`;
                    // 保存到本地存储
                    localStorage.setItem('backgroundImage', event.target.result);
                };
                reader.readAsDataURL(file);
            }
        });
        
        // 数字大小滑块事件
        numberSizeInput.addEventListener('input', function() {
            numberSizeValue.textContent = this.value + 'px';
        });
        
        // 标题大小滑块事件
        titleSizeInput.addEventListener('input', function() {
            titleSizeValue.textContent = this.value + 'px';
        });
        
        // 标签大小滑块事件
        dayLabelSizeInput.addEventListener('input', function() {
            dayLabelSizeValue.textContent = this.value + 'px';
        });
        
        hourLabelSizeInput.addEventListener('input', function() {
            hourLabelSizeValue.textContent = this.value + 'px';
        });
        
        minuteLabelSizeInput.addEventListener('input', function() {
            minuteLabelSizeValue.textContent = this.value + 'px';
        });
        
        secondLabelSizeInput.addEventListener('input', function() {
            secondLabelSizeValue.textContent = this.value + 'px';
        });
        
        // 主题选择
        themeOptions.forEach(option => {
            option.addEventListener('click', function() {
                themeOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                
                const theme = this.getAttribute('data-theme');
                applyTheme(theme);
            });
        });
        
        // 切换设置面板显示
        function toggleSettings() {
            settingsPanel.classList.toggle('active');
        }
        
        // 保存设置
        function saveSettings() {
            // 更新目标日期
            const targetDate = new Date(targetDateInput.value);
            localStorage.setItem('targetDate', targetDate.toISOString());
            
            // 更新倒计时标题
            const title = countdownTitleInput.value || '重要事件倒计时';
            titleDisplay.textContent = title;
            localStorage.setItem('countdownTitle', title);
            
            // 更新标题颜色
            const titleColor = titleColorInput.value;
            titleDisplay.style.color = titleColor;
            localStorage.setItem('titleColor', titleColor);
            
            // 更新标题大小
            const titleSize = titleSizeInput.value + 'px';
            titleDisplay.style.fontSize = titleSize;
            localStorage.setItem('titleSize', titleSizeInput.value);
            
            // 更新背景颜色
            const bgColor = backgroundColorInput.value;
            countdownDisplay.style.backgroundColor = bgColor;
            localStorage.setItem('backgroundColor', bgColor);
            
            // 更新数字颜色
            const numberColor = numberColorInput.value;
            updateNumberColor(numberColor);
            localStorage.setItem('numberColor', numberColor);
            
            // 更新数字大小
            const numberSize = numberSizeInput.value + 'px';
            updateNumberSize(numberSize);
            localStorage.setItem('numberSize', numberSizeInput.value);
            
            // 更新标签颜色
            updateLabelColors();
            
            // 更新标签大小
            updateLabelSizes();
            
            // 更新倒计时位置
            const position = countdownPositionInput.value;
            updateCountdownPosition(position);
            localStorage.setItem('countdownPosition', position);
            
            // 隐藏设置面板
            settingsPanel.classList.remove('active');
        }
        
        // 加载设置
        function loadSettings() {
            // 目标日期
            if (localStorage.getItem('targetDate')) {
                targetDateInput.value = formatDateForInput(new Date(localStorage.getItem('targetDate')));
            }
            
            // 倒计时标题
            if (localStorage.getItem('countdownTitle')) {
                countdownTitleInput.value = localStorage.getItem('countdownTitle');
                titleDisplay.textContent = localStorage.getItem('countdownTitle');
            }
            
            // 标题颜色
            if (localStorage.getItem('titleColor')) {
                titleColorInput.value = localStorage.getItem('titleColor');
                titleDisplay.style.color = localStorage.getItem('titleColor');
            }
            
            // 标题大小
            if (localStorage.getItem('titleSize')) {
                titleSizeInput.value = localStorage.getItem('titleSize');
                titleSizeValue.textContent = localStorage.getItem('titleSize') + 'px';
                titleDisplay.style.fontSize = localStorage.getItem('titleSize') + 'px';
            }
            
            // 背景颜色
            if (localStorage.getItem('backgroundColor')) {
                backgroundColorInput.value = localStorage.getItem('backgroundColor');
                countdownDisplay.style.backgroundColor = localStorage.getItem('backgroundColor');
            }
            
            // 背景图片
            if (localStorage.getItem('backgroundImage')) {
                countdownDisplay.style.backgroundImage = `url(${localStorage.getItem('backgroundImage')})`;
            }
            
            // 数字颜色
            if (localStorage.getItem('numberColor')) {
                numberColorInput.value = localStorage.getItem('numberColor');
                updateNumberColor(localStorage.getItem('numberColor'));
            }
            
            // 数字大小
            if (localStorage.getItem('numberSize')) {
                numberSizeInput.value = localStorage.getItem('numberSize');
                numberSizeValue.textContent = localStorage.getItem('numberSize') + 'px';
                updateNumberSize(localStorage.getItem('numberSize') + 'px');
            }
            
            // 标签颜色
            loadLabelColors();
            
            // 标签大小
            loadLabelSizes();
            
            // 倒计时位置
            if (localStorage.getItem('countdownPosition')) {
                countdownPositionInput.value = localStorage.getItem('countdownPosition');
                updateCountdownPosition(localStorage.getItem('countdownPosition'));
            }
        }
        
        // 应用主题
        function applyTheme(theme) {
            let bgColor, numberColor, titleColor;
            
            switch(theme) {
                case 'purple':
                    bgColor = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    numberColor = '#ffffff';
                    titleColor = '#ffffff';
                    break;
                case 'pink':
                    bgColor = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
                    numberColor = '#ffffff';
                    titleColor = '#ffffff';
                    break;
                case 'blue':
                    bgColor = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
                    numberColor = '#ffffff';
                    titleColor = '#ffffff';
                    break;
                case 'green':
                    bgColor = 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)';
                    numberColor = '#333333';
                    titleColor = '#333333';
                    break;
                case 'sunset':
                    bgColor = 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)';
                    numberColor = '#333333';
                    titleColor = '#333333';
                    break;
                default:
                    bgColor = '#222222';
                    numberColor = '#ffffff';
                    titleColor = '#ffffff';
            }
            
            countdownDisplay.style.background = bgColor;
            countdownDisplay.style.backgroundImage = 'none';
            backgroundColorInput.value = '#222222'; // 重置颜色选择器
            
            updateNumberColor(numberColor);
            numberColorInput.value = numberColor;
            
            titleDisplay.style.color = titleColor;
            titleColorInput.value = titleColor;
            
            // 重置标签颜色为白色
            dayLabelColorInput.value = '#ffffff';
            hourLabelColorInput.value = '#ffffff';
            minuteLabelColorInput.value = '#ffffff';
            secondLabelColorInput.value = '#ffffff';
            updateLabelColors();
            
            // 保存到本地存储
            localStorage.setItem('backgroundColor', '#222222');
            localStorage.setItem('numberColor', numberColor);
            localStorage.setItem('titleColor', titleColor);
            localStorage.removeItem('backgroundImage');
        }
        
        // 更新数字颜色
        function updateNumberColor(color) {
            const timeValues = document.querySelectorAll('.time-value');
            timeValues.forEach(value => {
                value.style.color = color;
            });
        }
        
        // 更新数字大小
        function updateNumberSize(size) {
            const timeValues = document.querySelectorAll('.time-value');
            timeValues.forEach(value => {
                value.style.fontSize = size;
            });
        }
        
        // 更新标签颜色
        function updateLabelColors() {
            dayLabel.style.color = dayLabelColorInput.value;
            hourLabel.style.color = hourLabelColorInput.value;
            minuteLabel.style.color = minuteLabelColorInput.value;
            secondLabel.style.color = secondLabelColorInput.value;
            
            // 保存到本地存储
            localStorage.setItem('dayLabelColor', dayLabelColorInput.value);
            localStorage.setItem('hourLabelColor', hourLabelColorInput.value);
            localStorage.setItem('minuteLabelColor', minuteLabelColorInput.value);
            localStorage.setItem('secondLabelColor', secondLabelColorInput.value);
        }
        
        // 加载标签颜色
        function loadLabelColors() {
            if (localStorage.getItem('dayLabelColor')) {
                dayLabelColorInput.value = localStorage.getItem('dayLabelColor');
                dayLabel.style.color = localStorage.getItem('dayLabelColor');
            }
            
            if (localStorage.getItem('hourLabelColor')) {
                hourLabelColorInput.value = localStorage.getItem('hourLabelColor');
                hourLabel.style.color = localStorage.getItem('hourLabelColor');
            }
            
            if (localStorage.getItem('minuteLabelColor')) {
                minuteLabelColorInput.value = localStorage.getItem('minuteLabelColor');
                minuteLabel.style.color = localStorage.getItem('minuteLabelColor');
            }
            
            if (localStorage.getItem('secondLabelColor')) {
                secondLabelColorInput.value = localStorage.getItem('secondLabelColor');
                secondLabel.style.color = localStorage.getItem('secondLabelColor');
            }
        }
        
        // 更新标签大小
        function updateLabelSizes() {
            dayLabel.style.fontSize = dayLabelSizeInput.value + 'px';
            hourLabel.style.fontSize = hourLabelSizeInput.value + 'px';
            minuteLabel.style.fontSize = minuteLabelSizeInput.value + 'px';
            secondLabel.style.fontSize = secondLabelSizeInput.value + 'px';
            
            // 保存到本地存储
            localStorage.setItem('dayLabelSize', dayLabelSizeInput.value);
            localStorage.setItem('hourLabelSize', hourLabelSizeInput.value);
            localStorage.setItem('minuteLabelSize', minuteLabelSizeInput.value);
            localStorage.setItem('secondLabelSize', secondLabelSizeInput.value);
        }
        
        // 加载标签大小
        function loadLabelSizes() {
            if (localStorage.getItem('dayLabelSize')) {
                dayLabelSizeInput.value = localStorage.getItem('dayLabelSize');
                dayLabelSizeValue.textContent = localStorage.getItem('dayLabelSize') + 'px';
                dayLabel.style.fontSize = localStorage.getItem('dayLabelSize') + 'px';
            }
            
            if (localStorage.getItem('hourLabelSize')) {
                hourLabelSizeInput.value = localStorage.getItem('hourLabelSize');
                hourLabelSizeValue.textContent = localStorage.getItem('hourLabelSize') + 'px';
                hourLabel.style.fontSize = localStorage.getItem('hourLabelSize') + 'px';
            }
            
            if (localStorage.getItem('minuteLabelSize')) {
                minuteLabelSizeInput.value = localStorage.getItem('minuteLabelSize');
                minuteLabelSizeValue.textContent = localStorage.getItem('minuteLabelSize') + 'px';
                minuteLabel.style.fontSize = localStorage.getItem('minuteLabelSize') + 'px';
            }
            
            if (localStorage.getItem('secondLabelSize')) {
                secondLabelSizeInput.value = localStorage.getItem('secondLabelSize');
                secondLabelSizeValue.textContent = localStorage.getItem('secondLabelSize') + 'px';
                secondLabel.style.fontSize = localStorage.getItem('secondLabelSize') + 'px';
            }
        }
        
        // 更新倒计时位置
        function updateCountdownPosition(position) {
            countdownDisplay.style.justifyContent = 'center';
            countdownDisplay.style.alignItems = 'center';
            countdownDisplay.style.padding = '0';
            
            switch(position) {
                case 'top':
                    countdownDisplay.style.justifyContent = 'flex-start';
                    countdownDisplay.style.paddingTop = '50px';
                    break;
                case 'bottom':
                    countdownDisplay.style.justifyContent = 'flex-end';
                    countdownDisplay.style.paddingBottom = '50px';
                    break;
                case 'left':
                    countdownDisplay.style.alignItems = 'flex-start';
                    countdownDisplay.style.paddingLeft = '50px';
                    break;
                case 'right':
                    countdownDisplay.style.alignItems = 'flex-end';
                    countdownDisplay.style.paddingRight = '50px';
                    break;
            }
        }
        
        // 更新倒计时显示
        function updateCountdown() {
            const targetDate = localStorage.getItem('targetDate') ? 
                new Date(localStorage.getItem('targetDate')) : new Date(targetDateInput.value);
                
            const now = new Date().getTime();
            const distance = targetDate.getTime() - now;
            
            if (distance < 0) {
                daysDisplay.textContent = '00';
                hoursDisplay.textContent = '00';
                minutesDisplay.textContent = '00';
                secondsDisplay.textContent = '00';
                return;
            }
            
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            daysDisplay.textContent = formatTime(days);
            hoursDisplay.textContent = formatTime(hours);
            minutesDisplay.textContent = formatTime(minutes);
            secondsDisplay.textContent = formatTime(seconds);
        }
        
        // 切换全屏
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`全屏请求错误: ${err.message}`);
                });
                fullscreenBtn.textContent = '退出全屏';
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    fullscreenBtn.textContent = '全屏';
                }
            }
        }
        
        // 格式化时间（补零）
        function formatTime(time) {
            return time < 10 ? `0${time}` : time;
        }
        
        // 格式化日期为输入框可用的格式
        function formatDateForInput(date) {
            const year = date.getFullYear();
            const month = formatTime(date.getMonth() + 1);
            const day = formatTime(date.getDate());
            const hours = formatTime(date.getHours());
            const minutes = formatTime(date.getMinutes());
            
            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }
        
        // 初始化应用
        init();
    </script>
</body>
</html>
